<div class="section-root">
  <div class="section-header">
    <button class="btn btn-add" (click)="addSection()">+ Section</button>
    <div class="spacer"></div>
    <div class="sections-count">({{ sections.length }})</div>
  </div>

  @for (section of sections; track trackByIndex($index); let i = $index) {
  <div class="section-box">
    <div class="section-controls">
      <button class="btn btn-add" (click)="addInput(i)">+ Input</button>
      <div class="section-title">Section {{ i + 1 }}</div>
      <div class="section-meta">({{ section.length }})</div>
      <div class="spacer"></div>
      <button class="btn btn-remove" (click)="removeSection(i)" [disabled]="sections.length <= 1">
        âœ•
      </button>
    </div>

    @for (value of section; track trackByIndex($index); let j = $index) {
    <app-dynamic-input [value]="value" [index]="j" [removable]="section.length > 1"
      (valueChange)="updateValue(i, j, $event)" (remove)="removeInput(i, $event)">
    </app-dynamic-input>
    }

    <div class="result-row">
      <span class="-cl-label-no">Result</span>
      <div class="result-value">{{ result(i) }}</div>
    </div>
  </div>
  }
</div>
